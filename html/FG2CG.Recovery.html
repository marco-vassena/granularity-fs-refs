<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>FG2CG.Recovery</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Comment">-- This module recovers a FG TINI proof from CG TINI and the FG â†’ CG</a>
<a id="70" class="Comment">-- translation.</a>

<a id="87" class="Keyword">open</a> <a id="92" class="Keyword">import</a> <a id="99" href="Lattice.html" class="Module">Lattice</a>

<a id="108" class="Keyword">module</a> <a id="115" href="FG2CG.Recovery.html" class="Module">FG2CG.Recovery</a> <a id="130" class="Symbol">{{</a><a id="132" href="FG2CG.Recovery.html#132" class="Bound">ğ‘³</a> <a id="134" class="Symbol">:</a> <a id="136" href="Lattice.html#Lattice" class="Function">Lattice</a><a id="143" class="Symbol">}}</a> <a id="146" class="Symbol">(</a><a id="147" href="FG2CG.Recovery.html#147" class="Bound">A</a> <a id="149" class="Symbol">:</a> <a id="151" href="Lattice.Base.html#Label" class="Field">Label</a><a id="156" class="Symbol">)</a> <a id="158" class="Keyword">where</a>

<a id="165" class="Keyword">open</a> <a id="170" class="Keyword">import</a> <a id="177" href="FG.html" class="Module">FG</a> <a id="180" class="Symbol">as</a> <a id="183" class="Module">FG</a> <a id="186" class="Keyword">hiding</a> <a id="193" class="Symbol">(</a><a id="194" href="FG.Types.html#Ty._%C3%97_" class="InductiveConstructor Operator">_Ã—_</a> <a id="198" class="Symbol">;</a> <a id="200" href="Generic.Context.Base.html#_%E2%8A%86_" class="Datatype Operator">_âŠ†_</a><a id="203" class="Symbol">)</a>
<a id="205" class="Keyword">open</a> <a id="210" class="Keyword">import</a> <a id="217" href="CG.html" class="Module">CG</a> <a id="220" class="Symbol">as</a> <a id="223" class="Module">CG</a> <a id="226" class="Keyword">hiding</a> <a id="233" class="Symbol">(</a><a id="234" href="CG.Types.html#Ty._%C3%97_" class="InductiveConstructor Operator">_Ã—_</a> <a id="238" class="Symbol">;</a> <a id="240" href="Generic.Context.Base.html#_%E2%8A%86_" class="Datatype Operator">_âŠ†_</a><a id="243" class="Symbol">)</a>
<a id="245" class="Keyword">open</a> <a id="250" class="Keyword">import</a> <a id="257" href="CG.Security.html" class="Module">CG.Security</a> <a id="269" href="FG2CG.Recovery.html#147" class="Bound">A</a>
<a id="271" class="Keyword">open</a> <a id="276" class="Keyword">import</a> <a id="283" href="FG.LowEq.html" class="Module">FG.LowEq</a> <a id="292" href="FG2CG.Recovery.html#147" class="Bound">A</a> <a id="294" class="Symbol">as</a> <a id="F" href="FG2CG.Recovery.html#F" class="Module">F</a>
<a id="299" class="Keyword">open</a> <a id="304" class="Keyword">import</a> <a id="311" href="FG2CG.Correct.html" class="Module">FG2CG.Correct</a>
<a id="325" class="Keyword">open</a> <a id="330" class="Keyword">import</a> <a id="337" href="FG2CG.Recovery.Lift.html" class="Module">FG2CG.Recovery.Lift</a> <a id="357" href="FG2CG.Recovery.html#147" class="Bound">A</a> <a id="359" class="Keyword">public</a>
<a id="366" class="Keyword">open</a> <a id="371" class="Keyword">import</a> <a id="378" href="FG2CG.Recovery.Unlift.html" class="Module">FG2CG.Recovery.Unlift</a> <a id="400" href="FG2CG.Recovery.html#147" class="Bound">A</a> <a id="402" class="Keyword">public</a>
<a id="409" class="Keyword">open</a> <a id="414" class="Keyword">import</a> <a id="421" href="Generic.Partial.Bijection.html" class="Module">Generic.Partial.Bijection</a>
<a id="447" class="Keyword">open</a> <a id="452" class="Keyword">import</a> <a id="459" href="Data.Product.html" class="Module">Data.Product</a> <a id="472" class="Keyword">renaming</a> <a id="481" class="Symbol">(</a><a id="482" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">_,_</a> <a id="486" class="Symbol">to</a> <a id="489" href="Data.Product.html#%CE%A3._%2C_" class="InductiveConstructor Operator">_âˆ§_</a><a id="492" class="Symbol">)</a>

<a id="495" class="Comment">-- Recovery of TINI</a>
<a id="515" class="Comment">--</a>
<a id="518" class="Comment">-- The proof is structured as follows:</a>
<a id="557" class="Comment">-- 1) Apply the semantics preserving transformation.</a>
<a id="610" class="Comment">-- 2) Lift L-equivalence of initial configurations and environments from FG to CG.</a>
<a id="693" class="Comment">-- 3) Apply CG TINI to CG translated program and obtain CG L-equivalence.</a>
<a id="767" class="Comment">-- 4) Back-translate L-equivalence of final configurations from CG to FG (unlifting).</a>

<a id="854" class="Comment">-- TODO: use TINI shorthand ?</a>
<a id="tini-via-cg" href="FG2CG.Recovery.html#tini-via-cg" class="Function">tini-via-cg</a> <a id="896" class="Symbol">:</a>  <a id="899" class="Symbol">âˆ€</a> <a id="901" class="Symbol">{</a><a id="902" href="FG2CG.Recovery.html#902" class="Bound">Ï„</a> <a id="904" href="FG2CG.Recovery.html#904" class="Bound">Î“</a> <a id="906" href="FG2CG.Recovery.html#906" class="Bound">pc</a> <a id="909" href="FG2CG.Recovery.html#909" class="Bound">Î¸â‚</a> <a id="912" href="FG2CG.Recovery.html#912" class="Bound">Î¸â‚‚</a> <a id="915" href="FG2CG.Recovery.html#915" class="Bound">Î²</a><a id="916" class="Symbol">}</a> <a id="918" class="Symbol">{</a><a id="919" href="FG2CG.Recovery.html#919" class="Bound">câ‚</a> <a id="922" href="FG2CG.Recovery.html#922" class="Bound">câ‚‚</a> <a id="925" class="Symbol">:</a> <a id="927" href="FG.Syntax.html#IConf" class="Function">FG.IConf</a> <a id="936" href="FG2CG.Recovery.html#904" class="Bound">Î“</a> <a id="938" href="FG2CG.Recovery.html#902" class="Bound">Ï„</a><a id="939" class="Symbol">}</a> <a id="941" class="Symbol">{</a><a id="942" href="FG2CG.Recovery.html#942" class="Bound">câ‚&#39;</a> <a id="946" href="FG2CG.Recovery.html#946" class="Bound">câ‚‚&#39;</a> <a id="950" class="Symbol">:</a> <a id="952" href="FG.Syntax.html#FConf" class="Function">FG.FConf</a> <a id="961" href="FG2CG.Recovery.html#902" class="Bound">Ï„</a><a id="962" class="Symbol">}</a> <a id="964" class="Symbol">â†’</a>
                 <a id="983" class="Symbol">{{</a><a id="985" href="FG2CG.Recovery.html#985" class="Bound">validâ‚</a> <a id="992" class="Symbol">:</a> <a id="994" href="FG.Valid.html#Valid-Inputs" class="Function">FG.Valid-Inputs</a> <a id="1010" href="FG2CG.Recovery.html#919" class="Bound">câ‚</a> <a id="1013" href="FG2CG.Recovery.html#909" class="Bound">Î¸â‚</a><a id="1015" class="Symbol">}}</a> <a id="1018" class="Symbol">{{</a><a id="1020" href="FG2CG.Recovery.html#1020" class="Bound">validâ‚‚</a> <a id="1027" class="Symbol">:</a> <a id="1029" href="FG.Valid.html#Valid-Inputs" class="Function">FG.Valid-Inputs</a> <a id="1045" href="FG2CG.Recovery.html#922" class="Bound">câ‚‚</a> <a id="1048" href="FG2CG.Recovery.html#912" class="Bound">Î¸â‚‚</a><a id="1050" class="Symbol">}}</a> <a id="1053" class="Symbol">â†’</a>
                 <a id="1072" href="FG2CG.Recovery.html#919" class="Bound">câ‚</a> <a id="1075" href="FG.Semantics.html#_%E2%87%93%E2%9F%A8_%2C_%E2%9F%A9_" class="Function Operator">â‡“âŸ¨</a> <a id="1078" href="FG2CG.Recovery.html#909" class="Bound">Î¸â‚</a> <a id="1081" href="FG.Semantics.html#_%E2%87%93%E2%9F%A8_%2C_%E2%9F%A9_" class="Function Operator">,</a> <a id="1083" href="FG2CG.Recovery.html#906" class="Bound">pc</a> <a id="1086" href="FG.Semantics.html#_%E2%87%93%E2%9F%A8_%2C_%E2%9F%A9_" class="Function Operator">âŸ©</a> <a id="1088" href="FG2CG.Recovery.html#942" class="Bound">câ‚&#39;</a> <a id="1092" class="Symbol">â†’</a>
                 <a id="1111" href="FG2CG.Recovery.html#922" class="Bound">câ‚‚</a> <a id="1114" href="FG.Semantics.html#_%E2%87%93%E2%9F%A8_%2C_%E2%9F%A9_" class="Function Operator">â‡“âŸ¨</a> <a id="1117" href="FG2CG.Recovery.html#912" class="Bound">Î¸â‚‚</a> <a id="1120" href="FG.Semantics.html#_%E2%87%93%E2%9F%A8_%2C_%E2%9F%A9_" class="Function Operator">,</a> <a id="1122" href="FG2CG.Recovery.html#906" class="Bound">pc</a> <a id="1125" href="FG.Semantics.html#_%E2%87%93%E2%9F%A8_%2C_%E2%9F%A9_" class="Function Operator">âŸ©</a> <a id="1127" href="FG2CG.Recovery.html#946" class="Bound">câ‚‚&#39;</a> <a id="1131" class="Symbol">â†’</a>
                 <a id="1150" href="FG2CG.Recovery.html#919" class="Bound">câ‚</a> <a id="1153" href="FG.LowEq.html#F._%E2%89%88%E2%9F%A8_%E2%9F%A9%E1%B4%B5_" class="Function Operator">F.â‰ˆâŸ¨</a> <a id="1158" href="FG2CG.Recovery.html#915" class="Bound">Î²</a> <a id="1160" href="FG.LowEq.html#F._%E2%89%88%E2%9F%A8_%E2%9F%A9%E1%B4%B5_" class="Function Operator">âŸ©á´µ</a> <a id="1163" href="FG2CG.Recovery.html#922" class="Bound">câ‚‚</a> <a id="1166" class="Symbol">â†’</a>
                 <a id="1185" href="FG2CG.Recovery.html#909" class="Bound">Î¸â‚</a> <a id="1188" href="FG.LowEq.html#F._%E2%89%88%E2%9F%A8_%E2%9F%A9%E1%B4%B1_" class="Datatype Operator">F.â‰ˆâŸ¨</a> <a id="1193" href="FG2CG.Recovery.html#915" class="Bound">Î²</a> <a id="1195" href="FG.LowEq.html#F._%E2%89%88%E2%9F%A8_%E2%9F%A9%E1%B4%B1_" class="Datatype Operator">âŸ©á´±</a> <a id="1198" href="FG2CG.Recovery.html#912" class="Bound">Î¸â‚‚</a> <a id="1201" class="Symbol">â†’</a>
                 <a id="1220" href="Data.Product.html#%E2%88%83" class="Function">âˆƒ</a> <a id="1222" class="Symbol">(Î»</a> <a id="1225" href="FG2CG.Recovery.html#1225" class="Bound">Î²&#39;</a> <a id="1228" class="Symbol">â†’</a> <a id="1230" href="FG2CG.Recovery.html#915" class="Bound">Î²</a> <a id="1232" href="Generic.Partial.Bijection.html#_%E2%8A%86_" class="Record Operator">âŠ†</a> <a id="1234" href="FG2CG.Recovery.html#1225" class="Bound">Î²&#39;</a> <a id="1237" href="Data.Product.html#_%C3%97_" class="Function Operator">Ã—</a> <a id="1239" href="FG2CG.Recovery.html#942" class="Bound">câ‚&#39;</a> <a id="1243" href="FG.LowEq.html#F._%E2%89%88%E2%9F%A8_%E2%9F%A9%E1%B6%9C_" class="Function Operator">F.â‰ˆâŸ¨</a> <a id="1248" href="FG2CG.Recovery.html#1225" class="Bound">Î²&#39;</a> <a id="1251" href="FG.LowEq.html#F._%E2%89%88%E2%9F%A8_%E2%9F%A9%E1%B6%9C_" class="Function Operator">âŸ©á¶œ</a> <a id="1254" href="FG2CG.Recovery.html#946" class="Bound">câ‚‚&#39;</a><a id="1257" class="Symbol">)</a>
<a id="1259" href="FG2CG.Recovery.html#tini-via-cg" class="Function">tini-via-cg</a> <a id="1271" class="Symbol">{</a><a id="1272" class="Argument">pc</a> <a id="1275" class="Symbol">=</a> <a id="1277" href="FG2CG.Recovery.html#1277" class="Bound">pc</a><a id="1279" class="Symbol">}</a> <a id="1281" class="Symbol">{</a><a id="1282" class="Argument">câ‚</a> <a id="1285" class="Symbol">=</a> <a id="1287" href="FG2CG.Recovery.html#1287" class="Bound">câ‚</a><a id="1289" class="Symbol">}</a> <a id="1291" class="Symbol">{</a><a id="1292" class="Argument">câ‚‚</a> <a id="1295" class="Symbol">=</a> <a id="1297" href="FG2CG.Recovery.html#1297" class="Bound">câ‚‚</a><a id="1299" class="Symbol">}</a> <a id="1301" class="Symbol">{{</a><a id="1303" href="FG2CG.Recovery.html#1303" class="Bound">isVâ‚</a><a id="1307" class="Symbol">}}</a> <a id="1310" class="Symbol">{{</a><a id="1312" href="FG2CG.Recovery.html#1312" class="Bound">isVâ‚‚</a><a id="1316" class="Symbol">}}</a> <a id="1319" href="FG2CG.Recovery.html#1319" class="Bound">xâ‚</a> <a id="1322" href="FG2CG.Recovery.html#1322" class="Bound">xâ‚‚</a> <a id="1325" href="FG2CG.Recovery.html#1325" class="Bound">câ‚â‰ˆcâ‚‚</a> <a id="1331" href="FG2CG.Recovery.html#1331" class="Bound">Î¸â‚â‰ˆÎ¸â‚‚</a>
  <a id="1339" class="Keyword">with</a> <a id="1344" href="FG2CG.Correct.html#fg2cg%E1%B6%A0" class="Function">fg2cgá¶ </a> <a id="1351" href="FG2CG.Recovery.html#1319" class="Bound">xâ‚</a> <a id="1354" class="Symbol">|</a> <a id="1356" href="FG2CG.Correct.html#fg2cg%E1%B6%A0" class="Function">fg2cgá¶ </a> <a id="1363" href="FG2CG.Recovery.html#1322" class="Bound">xâ‚‚</a> <a id="1366" class="Symbol">|</a> <a id="1368" href="FG2CG.Recovery.Lift.html#lift-%E2%89%88%E1%B4%B5" class="Function">lift-â‰ˆá´µ</a> <a id="1376" href="FG2CG.Recovery.html#1277" class="Bound">pc</a> <a id="1379" href="FG2CG.Recovery.html#1325" class="Bound">câ‚â‰ˆcâ‚‚</a> <a id="1385" class="Symbol">|</a> <a id="1387" href="FG2CG.Recovery.Lift.html#lift-%E2%89%88%E1%B4%B1" class="Function">lift-â‰ˆá´±</a> <a id="1395" href="FG2CG.Recovery.html#1331" class="Bound">Î¸â‚â‰ˆÎ¸â‚‚</a>
<a id="1401" class="Symbol">...</a> <a id="1405" class="Symbol">|</a> <a id="1407" href="FG2CG.Recovery.html#1407" class="Bound">xâ‚&#39;</a> <a id="1411" class="Symbol">|</a> <a id="1413" href="FG2CG.Recovery.html#1413" class="Bound">xâ‚‚&#39;</a> <a id="1417" class="Symbol">|</a> <a id="1419" href="FG2CG.Recovery.html#1419" class="Bound">âŸªcâ‚â‰ˆcâ‚‚âŸ«</a> <a id="1427" class="Symbol">|</a> <a id="1429" href="FG2CG.Recovery.html#1429" class="Bound">âŸªÎ¸â‚â‰ˆÎ¸â‚‚âŸ«</a>
  <a id="1439" class="Keyword">with</a> <a id="1444" href="CG.Security.html#14083" class="Function">tiniá¶ </a> <a id="1450" class="Symbol">{{</a> <a id="1453" href="FG2CG.Recovery.Lift.html#lift-Valid-Inputs" class="Function">lift-Valid-Inputs</a> <a id="1471" class="Bound">pc</a> <a id="1474" class="Bound">câ‚</a> <a id="1477" class="Symbol">_</a> <a id="1479" class="Bound">isVâ‚</a> <a id="1484" class="Symbol">}}</a> <a id="1487" class="Symbol">{{</a> <a id="1490" href="FG2CG.Recovery.Lift.html#lift-Valid-Inputs" class="Function">lift-Valid-Inputs</a> <a id="1508" class="Bound">pc</a> <a id="1511" class="Bound">câ‚‚</a> <a id="1514" class="Symbol">_</a> <a id="1516" class="Bound">isVâ‚‚</a> <a id="1521" class="Symbol">}}</a> <a id="1524" href="FG2CG.Recovery.html#1407" class="Bound">xâ‚&#39;</a> <a id="1528" href="FG2CG.Recovery.html#1413" class="Bound">xâ‚‚&#39;</a> <a id="1532" href="FG2CG.Recovery.html#1419" class="Bound">âŸªcâ‚â‰ˆcâ‚‚âŸ«</a> <a id="1540" href="FG2CG.Recovery.html#1429" class="Bound">âŸªÎ¸â‚â‰ˆÎ¸â‚‚âŸ«</a>
<a id="1548" class="Symbol">...</a> <a id="1552" class="Symbol">|</a> <a id="1554" href="FG2CG.Recovery.html#1554" class="Bound">Î²&#39;</a> <a id="1557" href="Data.Product.html#%CE%A3._%E2%88%A7_" class="InductiveConstructor Operator">âˆ§</a> <a id="1559" href="FG2CG.Recovery.html#1559" class="Bound">Î²âŠ†Î²&#39;</a> <a id="1564" href="Data.Product.html#%CE%A3._%E2%88%A7_" class="InductiveConstructor Operator">âˆ§</a> <a id="1566" href="FG2CG.Recovery.html#1566" class="Bound">âŸªcâ‚&#39;â‰ˆcâ‚‚&#39;âŸ«</a> <a id="1576" class="Symbol">=</a> <a id="1578" href="FG2CG.Recovery.html#1554" class="Bound">Î²&#39;</a> <a id="1581" href="Data.Product.html#%CE%A3._%E2%88%A7_" class="InductiveConstructor Operator">âˆ§</a> <a id="1583" href="FG2CG.Recovery.html#1559" class="Bound">Î²âŠ†Î²&#39;</a> <a id="1588" href="Data.Product.html#%CE%A3._%E2%88%A7_" class="InductiveConstructor Operator">âˆ§</a> <a id="1590" href="FG2CG.Recovery.Unlift.html#unlift-%E2%89%88%E1%B6%9C" class="Function">unlift-â‰ˆá¶œ</a> <a id="1600" class="Symbol">(</a><a id="1601" href="FG.Semantics.html#step-%E2%8A%91" class="Function">FG.step-âŠ‘</a> <a id="1611" class="Bound">xâ‚</a><a id="1613" class="Symbol">)</a> <a id="1615" class="Symbol">(</a><a id="1616" href="FG.Semantics.html#step-%E2%8A%91" class="Function">FG.step-âŠ‘</a> <a id="1626" class="Bound">xâ‚‚</a><a id="1628" class="Symbol">)</a> <a id="1630" href="FG2CG.Recovery.html#1566" class="Bound">âŸªcâ‚&#39;â‰ˆcâ‚‚&#39;âŸ«</a>
</pre></body></html>